1. Run OSRM locally (backend)

OSRM is a server you run yourself. Your web app will send HTTP requests to it.

Step 1: Install OSRM

You can install OSRM using Docker (recommended):

docker pull osrm/osrm-backend

Step 2: Download OSM data

Get an extract (e.g. Germany, Baden-W√ºrttemberg, planet, etc.) from:

https://download.geofabrik.de/

http://planet.openstreetmap.org/

Example:

wget https://download.geofabrik.de/europe/germany/baden-wuerttemberg-latest.osm.pbf

Step 3: Prepare the data

Choose a profile: car.lua, foot.lua, bicycle.lua

docker run -t -v $(pwd):/data osrm/osrm-backend osrm-extract -p /opt/car.lua /data/baden-wuerttemberg-latest.osm.pbf
docker run -t -v $(pwd):/data osrm/osrm-backend osrm-partition /data/baden-wuerttemberg-latest.osrm
docker run -t -v $(pwd):/data osrm/osrm-backend osrm-customize /data/baden-wuerttemberg-latest.osrm

Step 4: Start the OSRM routing server
docker run -t -i -p 5000:5000 \
  -v $(pwd):/data osrm/osrm-backend \
  osrm-routed --algorithm mld /data/baden-wuerttemberg-latest.osrm


Your OSRM backend is now available locally at:

http://localhost:5000


You can test it:

http://localhost:5000/route/v1/driving/9.2169,48.7784;9.1829,48.7758

‚úÖ 2: Use OSRM in your local web app (frontend)

You can call OSRM directly from JavaScript like any REST API.

Below is a minimal example using Leaflet + OSRM.

üß© Minimal HTML/JS Example
<!DOCTYPE html>
<html>
<head>
  <title>Local OSRM Route Planner</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<body>
  <div id="map" style="height: 100vh;"></div>

  <script>
    const map = L.map("map").setView([48.78, 9.18], 13);

    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);

    async function getRoute(start, end) {
      const url = `http://localhost:5000/route/v1/driving/${start.lng},${start.lat};${end.lng},${end.lat}?overview=full&geometries=geojson`;

      const response = await fetch(url);
      const data = await response.json();

      const route = data.routes[0].geometry;

      L.geoJSON(route).addTo(map);
    }

    // Example usage
    const start = { lat: 48.7784, lng: 9.2169 };
    const end = { lat: 48.7758, lng: 9.1829 };

    getRoute(start, end);
  </script>
</body>
</html>

‚úîÔ∏è What this does

Loads a Leaflet map

Sends a request to your local OSRM server (localhost:5000)

Draws the route as a GeoJSON polyline

Optional: Using the official osrm-frontend

OSRM also provides an official minimal frontend you can host locally:

git clone https://github.com/Project-OSRM/osrm-frontend
cd osrm-frontend
npm install
npm start


SECOND HELP:

To run OSRM locally and use it in your own app, you need a specific set of map data files and preprocessing steps. Here‚Äôs exactly what data you need, where to get it, and how to prepare it.

‚úÖ 1. What data OSRM needs

OSRM needs two things:

(A) An OpenStreetMap (OSM) extract file

This is the raw map data (roads, paths, tags).

File format:

*.osm.pbf


Examples:

germany-latest.osm.pbf

baden-wuerttemberg-latest.osm.pbf

planet-latest.osm.pbf (entire world ‚Üí huge)

You download these from:
https://download.geofabrik.de/

(B) The routing profile

This tells OSRM how to route.

Examples:

car.lua

bicycle.lua

foot.lua

These are included in every OSRM Docker image at:

/opt/car.lua
/opt/foot.lua
/opt/bicycle.lua


You can also create your own if you want custom routing rules.

‚úîÔ∏è Summary of what you must prepare
File	Where it comes from	Purpose
*.osm.pbf	Download from Geofabrik	Raw map data
*.osrm and related files	Generated by OSRM‚Äôs extract/partition/customize	Preprocessed map graph
car.lua (or another profile)	Included with OSRM	Defines routing rules
‚úÖ 2. How to prepare the OSRM data

Once you download the .osm.pbf file, OSRM needs to preprocess it into its own internal format.

You do this using OSRM's tools:

osrm-extract

osrm-partition

osrm-customize

The result will be a set of files:

myregion.osrm
myregion.osrm.cells
myregion.osrm.core
myregion.osrm.names
myregion.osrm.restrictions
myregion.osrm.timestamp
... and a few more depending on the version


These are what osrm-routed actually uses.

‚≠ê Step-by-step setup

Below is a full, correct setup using Docker.

Step 1: Download a map extract

Example: Baden-W√ºrttemberg

wget https://download.geofabrik.de/europe/germany/baden-wuerttemberg-latest.osm.pbf

Step 2: Extract map data using a routing profile
docker run -t -v $(pwd):/data osrm/osrm-backend \
  osrm-extract -p /opt/car.lua /data/baden-wuerttemberg-latest.osm.pbf


This generates:

baden-wuerttemberg-latest.osrm
baden-wuerttemberg-latest.osrm.ebg
baden-wuerttemberg-latest.osrm.edges
baden-wuerttemberg-latest.osrm.nodes
...

Step 3: Partition the map (for MLD algorithm)
docker run -t -v $(pwd):/data osrm/osrm-backend \
  osrm-partition /data/baden-wuerttemberg-latest.osrm


This adds:

baden-wuerttemberg-latest.osrm.partition
baden-wuerttemberg-latest.osrm.cells

Step 4: Customize the partition
docker run -t -v $(pwd):/data osrm/osrm-backend \
  osrm-customize /data/baden-wuerttemberg-latest.osrm


This adds:

baden-wuerttemberg-latest.osrm.load
baden-wuerttemberg-latest.osrm.files

‚úîÔ∏è At this point you have all required OSRM data prepared.

The folder should look like:

baden-wuerttemberg-latest.osm.pbf
baden-wuerttemberg-latest.osrm
baden-wuerttemberg-latest.osrm.ebg
baden-wuerttemberg-latest.osrm.ebg_nodes
baden-wuerttemberg-latest.osrm.names
baden-wuerttemberg-latest.osrm.partition
baden-wuerttemberg-latest.osrm.cells
baden-wuerttemberg-latest.osrm.datasource_names
baden-wuerttemberg-latest.osrm.restrictions
baden-wuerttemberg-latest.osrm.timestamp
...


These files are what OSRM uses to route.

‚≠ê Step 5: Run the routing server
docker run -t -i -p 5000:5000 -v $(pwd):/data osrm/osrm-backend \
  osrm-routed --algorithm mld /data/baden-wuerttemberg-latest.osrm


Your OSRM HTTP API is now running on:

http://localhost:5000

üü© Now your frontend can call OSRM using ordinary HTTP requests

Example:

GET http://localhost:5000/route/v1/driving/9.21,48.78;9.18,48.77

üéØ In one sentence

To use OSRM, you need:

‚ûú an osm.pbf map extract + a routing profile + OSRM-preprocessed .osrm* files

and you generate them with extract ‚Üí partition ‚Üí customize.